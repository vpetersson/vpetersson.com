<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="index, follow">
  <meta http-equiv="content-language" content="en">

  <!-- Resource Hints -->
  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">

  <!-- Preload Critical Resources -->
  <link rel="preload" href="/assets/css/styles.css" as="style">
  <link rel="preload" href="/assets/css/main.css" as="style">

  <title>All things ZFS and FreeBSD with Allan Jude</title>
  <meta name="description" content="I explore the technical depths of ZFS and FreeBSD with Allan Jude, diving into everything from filesystem architecture to operating system development. From copy-on-write design to advanced storage capabilities, we unpack what makes these technologies crucial for modern infrastructure.
">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://vpetersson.com/podcast/S01E25.html">
  <meta property="og:title" content="All things ZFS and FreeBSD with Allan Jude">
  <meta property="og:description" content="I explore the technical depths of ZFS and FreeBSD with Allan Jude, diving into everything from filesystem architecture to operating system development. From copy-on-write design to advanced storage capabilities, we unpack what makes these technologies crucial for modern infrastructure.
">
  <meta property="og:image" content="https://vpetersson.com/assets/images/site/talk.webp">

  <!-- LinkedIn -->
  <meta property="og:site_name" content="Viktor's Tech Musings & Security Paranoia">
  <meta property="article:author" content="https://www.linkedin.com/in/vpetersson/">
  

  <!-- X (formerly Twitter) -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@vpetersson">
  <meta name="twitter:creator" content="@vpetersson">
  <meta name="twitter:title" content="All things ZFS and FreeBSD with Allan Jude">
  <meta name="twitter:description" content="I explore the technical depths of ZFS and FreeBSD with Allan Jude, diving into everything from filesystem architecture to operating system development. From copy-on-write design to advanced storage capabilities, we unpack what makes these technologies crucial for modern infrastructure.
">
  <meta name="twitter:image" content="https://vpetersson.com/assets/images/site/talk.webp">

  <!-- Social Profile Links -->
  <link rel="me" href="https://github.com/vpetersson">
  <link rel="me" href="https://www.linkedin.com/in/vpetersson/">
  <link rel="me" href="https://hachyderm.io/@vpetersson@hachyderm.io">

  <!-- Schema.org Person -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Viktor Petersson",
    "url": "https://vpetersson.com",
    "image": "https://vpetersson.com/assets/images/site/talk.webp",
    "sameAs": [
      "https://github.com/vpetersson",
      "https://www.linkedin.com/in/vpetersson/",
      "https://hachyderm.io/@vpetersson@hachyderm.io",
      "https://twitter.com/vpetersson"
    ]
  }
  </script>

  <!-- Custom meta tags -->
  

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Anton|DM Sans|Roboto|Hanken+Grotesk"
    />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Fira+Code:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="/assets/css/styles.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/native.css">
  
  <!-- Font Awesome (bundled from node_modules) -->
  <link rel="stylesheet" href="/assets/css/fontawesome-core.css">
  <link rel="stylesheet" href="/assets/css/fontawesome-solid.css">
  <link rel="stylesheet" href="/assets/css/fontawesome-brands.css">

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZY6ZNLNNC8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ZY6ZNLNNC8');

  // Track outbound links and CTAs
  function trackEvent(category, action, label, source) {
    gtag('event', action, {
      'event_category': category,
      'event_label': label,
      'source': source
    });
  }
</script>


  <link rel="canonical" href="https://vpetersson.com/podcast/S01E25.html" />
</head>

  <body>
    <!-- Skip Navigation -->
<a href="#main-content" class="skip-navigation">Skip to main content</a>

<header class="p-8 flex justify-between bg-primaryBG border-b border-white-alpha-20" role="banner">
  <div class="flex gap-10 justify-between items-center">
    <a href="/" aria-label="Viktor Petersson - Home">
      <img src="/assets/images/site/logo-white.svg" alt="Viktor Petersson logo" width="120" height="40" />
    </a>
    <nav class="hidden lg:flex gap-6">
  
    <a href="/" class="text-white uppercase">HOME</a>
  
    <a href="/about" class="text-white uppercase">ABOUT</a>
  
    <a href="/consulting" class="text-white uppercase">CONSULTING</a>
  
    <a href="/podcast" class="text-white uppercase">PODCAST</a>
  
    <a href="/blog" class="text-white uppercase">BLOG</a>
  
    <a href="https://studio.viktopia.io/" class="text-white uppercase">VIKTOPIA STUDIO</a>
  
</nav>

  </div>
  <div class="flex gap-2 justify-between items-center">
    <div class="header-search hidden lg:block">
      <form action="/search" method="get" role="search">
        <label for="searchright" class="sr-only">Search the site</label>
        <input
          class="search expandright"
          id="searchright"
          type="search"
          name="query"
          placeholder="Search"
          aria-label="Search"
        >
        <button class="button searchbutton" type="submit" aria-label="Submit search">
          <span class="mglass" aria-hidden="true">&#9906;</span>
        </button>
      </form>
    </div>

    <div class="hidden lg:block">
      <div class="flex gap-[13px] ">
  <a href="https://twitter.com/vpetersson" target="_new">
    <img src="/assets/images/site/x-white.svg" alt="x logo" />
  </a>
  <a href="https://github.com/vpetersson" target="_new">
    <img src="/assets/images/site/github-white.svg" alt="github logo" />
  </a>
  <a href="https://www.linkedin.com/in/vpetersson/" target="_new">
    <img src="/assets/images/site/linkedin-white.svg" alt="linkedIn logo" />
  </a>
</div>
    </div>

    <!-- Use modern mobile navigation -->
    <!-- Modern Mobile Navigation -->
<div class="mobile-nav-container lg:hidden">
  <!-- Menu Toggle Button -->
  <button
    class="mobile-menu-toggle btn-reset touch-target"
    aria-label="Toggle navigation menu"
    aria-expanded="false"
    aria-controls="mobile-menu"
    data-menu-toggle
  >
    <span class="hamburger-icon" aria-hidden="true">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </span>
  </button>

  <!-- Mobile Menu Backdrop -->
  <div
    class="mobile-menu-backdrop"
    data-menu-backdrop
    aria-hidden="true"
  ></div>

  <!-- Mobile Menu Panel -->
  <nav
    class="mobile-menu"
    id="mobile-menu"
    aria-labelledby="mobile-menu-label"
    data-menu-panel
  >
    <!-- Menu Header -->
    <div class="mobile-menu-header">
      <h2 id="mobile-menu-label" class="sr-only">Navigation Menu</h2>
      <button
        class="mobile-menu-close btn-reset touch-target"
        aria-label="Close navigation menu"
        data-menu-close
      >
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M18 6L6 18M6 6l12 12"/>
        </svg>
      </button>
    </div>

    <!-- Navigation Links -->
    <ul class="mobile-menu-list" role="list">
      
        <li class="mobile-menu-item">
          <a
            href="/"
            class="mobile-menu-link keyboard-focusable"
            
          >
            HOME
          </a>
        </li>
      
        <li class="mobile-menu-item">
          <a
            href="/about"
            class="mobile-menu-link keyboard-focusable"
            
          >
            ABOUT
          </a>
        </li>
      
        <li class="mobile-menu-item">
          <a
            href="/consulting"
            class="mobile-menu-link keyboard-focusable"
            
          >
            CONSULTING
          </a>
        </li>
      
        <li class="mobile-menu-item">
          <a
            href="/podcast"
            class="mobile-menu-link keyboard-focusable"
            
          >
            PODCAST
          </a>
        </li>
      
        <li class="mobile-menu-item">
          <a
            href="/blog"
            class="mobile-menu-link keyboard-focusable"
            
          >
            BLOG
          </a>
        </li>
      
        <li class="mobile-menu-item">
          <a
            href="https://studio.viktopia.io/"
            class="mobile-menu-link keyboard-focusable"
            
          >
            VIKTOPIA STUDIO
          </a>
        </li>
      
    </ul>

    <!-- Social Links -->
    <div class="mobile-menu-footer">
      <div class="mobile-social-links">
        <div class="flex gap-[13px] ">
  <a href="https://twitter.com/vpetersson" target="_new">
    <img src="/assets/images/site/x-white.svg" alt="x logo" />
  </a>
  <a href="https://github.com/vpetersson" target="_new">
    <img src="/assets/images/site/github-white.svg" alt="github logo" />
  </a>
  <a href="https://www.linkedin.com/in/vpetersson/" target="_new">
    <img src="/assets/images/site/linkedin-white.svg" alt="linkedIn logo" />
  </a>
</div>
      </div>
    </div>
  </nav>
</div>

<style>
/* Mobile Navigation Styles */
.mobile-nav-container {
  position: relative;
}

.mobile-menu-toggle {
  position: relative;
  z-index: var(--z-fixed);
  color: var(--color-white);
  transition: transform var(--transition-normal);

  &[aria-expanded="true"] {
    transform: rotate(90deg);
  }
}

.hamburger-icon {
  display: flex;
  flex-direction: column;
  width: 24px;
  height: 18px;
  justify-content: space-between;
}

.hamburger-line {
  width: 100%;
  height: 2px;
  background: currentColor;
  border-radius: 1px;
  transition: all var(--transition-normal);
  transform-origin: center;
}

.mobile-menu-toggle[aria-expanded="true"] .hamburger-line {
  &:nth-child(1) {
    transform: rotate(45deg) translate(6px, 6px);
  }

  &:nth-child(2) {
    opacity: 0;
  }

  &:nth-child(3) {
    transform: rotate(-45deg) translate(6px, -6px);
  }
}

.mobile-menu-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
  opacity: 0;
  visibility: hidden;
  transition: all var(--transition-normal);
  z-index: var(--z-modal);
}

.mobile-menu-backdrop.is-visible {
  opacity: 1;
  visibility: visible;
}

.mobile-menu {
  position: fixed;
  top: 0;
  right: 0;
  width: min(400px, 100vw);
  height: 100vh;
  background: var(--color-gray-900);
  border-left: 1px solid var(--color-gray-200);
  transform: translateX(100%);
  transition: transform var(--transition-normal);
  z-index: var(--z-modal);
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  overscroll-behavior: contain;
}

.mobile-menu.is-open {
  transform: translateX(0);
}

.mobile-menu-header {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  padding: var(--space-4);
  border-bottom: 1px solid var(--color-gray-200);
}

.mobile-menu-close {
  color: var(--color-white);
}

.mobile-menu-list {
  flex: 1;
  padding: var(--space-4) 0;
  margin: 0;
  list-style: none;
}

.mobile-menu-item {
  margin: 0;
}

.mobile-menu-link {
  display: block;
  padding: var(--space-3) var(--space-4);
  color: var(--color-white);
  text-decoration: none;
  font-family: var(--font-family-body);
  font-size: var(--font-size-lg);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  transition: all var(--transition-normal);
  border-left: 3px solid transparent;

  &:hover {
    background: var(--color-gray-800);
    border-left-color: var(--color-primary);
  }

  &[aria-current="page"] {
    color: var(--color-primary);
    border-left-color: var(--color-primary);
    background: var(--color-gray-800);
  }
}

.mobile-menu-footer {
  padding: var(--space-4);
  border-top: 1px solid var(--color-gray-200);
}

.mobile-social-links {
  display: flex;
  gap: var(--space-3);
  justify-content: center;
}

/* Simple instant display */
.mobile-menu-item {
  opacity: 1;
}
</style>

<script>
// Modern Mobile Navigation JavaScript
(function() {
  const menuToggle = document.querySelector('[data-menu-toggle]');
  const menuPanel = document.querySelector('[data-menu-panel]');
  const menuBackdrop = document.querySelector('[data-menu-backdrop]');
  const menuClose = document.querySelector('[data-menu-close]');
  const menuLinks = document.querySelectorAll('.mobile-menu-link');

  let isOpen = false;

  function openMenu() {
    isOpen = true;
    menuToggle.setAttribute('aria-expanded', 'true');
    menuPanel.classList.add('is-open');
    menuBackdrop.classList.add('is-visible');
    document.body.style.overflow = 'hidden';

    // Focus first menu item
    const firstLink = menuPanel.querySelector('.mobile-menu-link');
    if (firstLink) {
      firstLink.focus();
    }
  }

  function closeMenu() {
    isOpen = false;
    menuToggle.setAttribute('aria-expanded', 'false');
    menuPanel.classList.remove('is-open');
    menuBackdrop.classList.remove('is-visible');
    document.body.style.overflow = '';

    // Return focus to toggle button
    menuToggle.focus();
  }

  function toggleMenu() {
    isOpen ? closeMenu() : openMenu();
  }

  // Event listeners
  menuToggle.addEventListener('click', toggleMenu);
  menuClose.addEventListener('click', closeMenu);
  menuBackdrop.addEventListener('click', closeMenu);

  // Close on link click
  menuLinks.forEach(link => {
    link.addEventListener('click', closeMenu);
  });

  // Keyboard navigation
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && isOpen) {
      closeMenu();
    }
  });

  // Trap focus in menu when open
  menuPanel.addEventListener('keydown', (e) => {
    if (e.key === 'Tab') {
      const focusableElements = menuPanel.querySelectorAll(
        'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
      );
      const firstElement = focusableElements[0];
      const lastElement = focusableElements[focusableElements.length - 1];

      if (e.shiftKey && document.activeElement === firstElement) {
        e.preventDefault();
        lastElement.focus();
      } else if (!e.shiftKey && document.activeElement === lastElement) {
        e.preventDefault();
        firstElement.focus();
      }
    }
  });
})();
</script>
  </div>
</header>

    <main id="main-content" class="body">
      <!-- Podcast episode schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": ["VideoObject", "PodcastEpisode"],
  "name": "All things ZFS and FreeBSD with Allan Jude",
  "description": "I explore the technical depths of ZFS and FreeBSD with Allan Jude, diving into everything from filesystem architecture to operating system development. From copy-on-write design to advanced storage capabilities, we unpack what makes these technologies crucial for modern infrastructure.\n",
  "uploadDate": "2024-12-01T23:00:00+00:00",
  "duration": "PT78M",
  "thumbnailUrl": "https://i.ytimg.com/vi/hTbqEf9LRGE/default.jpg",
  "embedUrl": "https://www.youtube.com/embed/hTbqEf9LRGE",
  "contentUrl": "https://www.youtube.com/watch?v=hTbqEf9LRGE",
  "url": "https://vpetersson.com/podcast/S01E25.html",
  "mainEntityOfPage": "https://vpetersson.com/podcast/S01E25.html",
  "inLanguage": "en",
  "isFamilyFriendly": true,
  
  "actors": [
    
    {
      "@type": "Person",
      "name": "Allan Jude"
    }
    
  ],
  
  "author": {
    "@type": "Person",
    "@id": "https://vpetersson.com/about/#person",
    "name": "Viktor Petersson",
    "url": "https://vpetersson.com/about/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Nerding Out with Viktor",
    "url": "https://vpetersson.com/podcast/"
  },
  "partOfSeries": {
    "@type": "PodcastSeries",
    "name": "Nerding Out with Viktor",
    "url": "https://vpetersson.com/podcast/",
    "inLanguage": "en",
    "isAccessibleForFree": true
  },
  "episodeNumber": 25,
  "sameAs": [
    "https://open.spotify.com/episode/3Kb9w6iakKoS86Q5cfQfZQ"
    ,"https://podcasts.apple.com/gb/podcast/all-things-zfs-and-freebsd-with-allan-jude/id1722663295?i=1000678932445"
    
  ]
}
</script>

<!-- Breadcrumbs schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://vpetersson.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Podcast",
      "item": "https://vpetersson.com/podcast/"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "All things ZFS and FreeBSD with Allan Jude",
      "item": "https://vpetersson.com/podcast/S01E25.html"
    }
  ]
}
</script>
<div class="page-header page-header-podcast">
  <h2 class="uppercase text-[48px] md:text-[91px] lg:text-[140px] xl:text-[186px] text-white text-center">Podcast</h2>
</div>
<div class="bg-secondaryBG pt-[42px] pb-[60px] px-4 sm:px-6 md:px-[120px] xl:pt-[80px] xl:pb-[130px]">
  <div class="flex flex-col lg:flex-row lg:gap-[50px] xl:gap-[106px] md:max-w-[1110px] xl:mx-auto">
    <div class="hidden lg:block lg:w-[210px] xl:w-[309px]">
      <div class="mb-6">
        <img src="/assets/images/site/talk-sm.webp" alt="Podcast Host" class="author-img rounded-full w-[162px] h-[162px]">
      </div>
      <p class="text-sm mb-6">
        Join Viktor, a proud nerd and seasoned entrepreneur, whose academic journey at Santa Clara University in Silicon Valley sparked a career marked by innovation and foresight. From his college days, Viktor embarked on an entrepreneurial path, beginning with YippieMove, a groundbreaking email migration service, and continuing with a series of bootstrapped ventures.
      </p>
      <div class="mb-6">
        <h4 class="mb-2">Links</h4>
        <div>



<div>
  <div class="flex gap-3">
    
      <a href="https://www.youtube.com/@nerdingoutwithviktor" target="_blank" rel="noopener noreferrer" onclick="trackEvent('Podcast', 'Click', 'YouTube', 'All things ZFS and FreeBSD with Allan Jude')">
        <img src="/assets/images/site/podcast-youtube-white.svg" alt="Listen to podcast on YouTube" />
      </a>
    
    
      <a href="https://open.spotify.com/show/7C6yipdVPWgBc6Bwikgo8g" target="_blank" rel="noopener noreferrer" onclick="trackEvent('Podcast', 'Click', 'Spotify', 'All things ZFS and FreeBSD with Allan Jude')">
        <img src="/assets/images/site/podcast-spotify-white.svg" alt="Listen to podcast on Spotify" />
      </a>
    
    
      <a href="https://podcasts.apple.com/us/podcast/nerding-out-with-viktor/id1722663295" target="_blank" rel="noopener noreferrer" onclick="trackEvent('Podcast', 'Click', 'Apple', 'All things ZFS and FreeBSD with Allan Jude')">
        <img src="/assets/images/site/podcast-apple-white.svg" alt="Listen to podcast on Apple" />
      </a>
    
    
    
      <a href="https://podcast.nerdingoutwithviktor.com/podcast_feed.xml" target="_blank" rel="noopener noreferrer" onclick="trackEvent('Podcast', 'Click', 'RSS', 'All things ZFS and FreeBSD with Allan Jude')">
        <img src="/assets/images/site/podcast-rss-white.svg" alt="RSS Feed" />
      </a>
    
  </div>
</div>
</div>
      </div>
      <div class="mb-6">
        <h4 class="mb-2">Follow Me</h4>
        <div><div class="flex gap-[13px] ">
  <a href="https://twitter.com/vpetersson" target="_new">
    <img src="/assets/images/site/x-white.svg" alt="x logo" />
  </a>
  <a href="https://github.com/vpetersson" target="_new">
    <img src="/assets/images/site/github-white.svg" alt="github logo" />
  </a>
  <a href="https://www.linkedin.com/in/vpetersson/" target="_new">
    <img src="/assets/images/site/linkedin-white.svg" alt="linkedIn logo" />
  </a>
</div></div>
      </div>
    </div>
    <div class="lg:hidden">
      <div class="flex mb-6 gap-[35px]">
        <img src="/assets/images/site/talk-sm.webp" alt="Podcast Host" class="author-img !rounded-full !w-[64px] !h-[64px] sm:!w-[100px] sm:!h-[100px]">
        <div>



<div>
  <div class="flex gap-3">
    
      <a href="https://www.youtube.com/@nerdingoutwithviktor" target="_blank" rel="noopener noreferrer" onclick="trackEvent('Podcast', 'Click', 'YouTube', 'All things ZFS and FreeBSD with Allan Jude')">
        <img src="/assets/images/site/podcast-youtube-white.svg" alt="Listen to podcast on YouTube" />
      </a>
    
    
      <a href="https://open.spotify.com/show/7C6yipdVPWgBc6Bwikgo8g" target="_blank" rel="noopener noreferrer" onclick="trackEvent('Podcast', 'Click', 'Spotify', 'All things ZFS and FreeBSD with Allan Jude')">
        <img src="/assets/images/site/podcast-spotify-white.svg" alt="Listen to podcast on Spotify" />
      </a>
    
    
      <a href="https://podcasts.apple.com/us/podcast/nerding-out-with-viktor/id1722663295" target="_blank" rel="noopener noreferrer" onclick="trackEvent('Podcast', 'Click', 'Apple', 'All things ZFS and FreeBSD with Allan Jude')">
        <img src="/assets/images/site/podcast-apple-white.svg" alt="Listen to podcast on Apple" />
      </a>
    
    
    
      <a href="https://podcast.nerdingoutwithviktor.com/podcast_feed.xml" target="_blank" rel="noopener noreferrer" onclick="trackEvent('Podcast', 'Click', 'RSS', 'All things ZFS and FreeBSD with Allan Jude')">
        <img src="/assets/images/site/podcast-rss-white.svg" alt="RSS Feed" />
      </a>
    
  </div>
</div>
</div>
      </div>
      <div>
        <div class="mb-6 flex gap-[35px]">
          <div>
            <h4 class="mb-2">Follow Me</h4>
            <div><div class="flex gap-[13px]  flex-col ">
  <a href="https://twitter.com/vpetersson" target="_new">
    <img src="/assets/images/site/x-white.svg" alt="x logo" />
  </a>
  <a href="https://github.com/vpetersson" target="_new">
    <img src="/assets/images/site/github-white.svg" alt="github logo" />
  </a>
  <a href="https://www.linkedin.com/in/vpetersson/" target="_new">
    <img src="/assets/images/site/linkedin-white.svg" alt="linkedIn logo" />
  </a>
</div></div>
          </div>
          <p class="text-sm md:text-lg mb-6 flex-1 items-center">
            Join Viktor, a proud nerd and seasoned entrepreneur, whose academic journey at Santa Clara University in Silicon Valley sparked a career marked by innovation and foresight. From his college days, Viktor embarked on an entrepreneurial path, beginning with YippieMove, a groundbreaking email migration service, and continuing with a series of bootstrapped ventures.
          </p>
        </div>
      </div>
    </div>
    <div class="flex-1">
      <div class="mb-5 relative">
        
          <div class="video-container">
            <iframe
              width="100%"
              height="400"
              src="https://www.youtube.com/embed/hTbqEf9LRGE"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen>
            </iframe>
          </div>
        
      </div>

      <h2 class="mb-5">All things ZFS and FreeBSD with Allan Jude</h2>
      <div class="mb-5 flex items-center">
        <span class="uppercase text-xl leading-[1.6px] mr-5">Play On</span>
        <span class="flex flex-1 gap-3">
          
            <a href="https://www.youtube.com/watch?v=hTbqEf9LRGE" target="_blank" rel="noopener noreferrer">
              <img src="/assets/images/site/podcast-youtube-dark.svg" alt="Listen to podcast on YouTube" />
            </a>
          
          
            <a href="https://open.spotify.com/episode/3Kb9w6iakKoS86Q5cfQfZQ" target="_blank" rel="noopener noreferrer">
              <img src="/assets/images/site/podcast-spotify-dark.svg" alt="Listen to podcast on Spotify" />
            </a>
          
          
            <a href="https://podcasts.apple.com/gb/podcast/all-things-zfs-and-freebsd-with-allan-jude/id1722663295?i=1000678932445" target="_blank" rel="noopener noreferrer">
              <img src="/assets/images/site/podcast-apple-dark.svg" alt="Listen to podcast on Apple" />
            </a>
          
          
        </span>
      </div>

      <div class="mb-5 flex gap-4 text-xs uppercase font-['DM Sans']">
        <span>01 DEC • 2024</span>
        
          <span>1 hour 18 mins</span>
        
      </div>

      <div class="mb-6"><div>
  <div class="text-xl font-semibold mb-5">Share:</div>
  <div class="flex gap-5">
    <a class="share-button share-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://vpetersson.com/podcast/S01E25.html" target="_blank" rel="noopener noreferrer nofollow" aria-label="Share on LinkedIn">
      <img src="/assets/images/site/linkedin-share.svg" alt="LinkedIn"/>
    </a>
    <a class="share-button share-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://vpetersson.com/podcast/S01E25.html" target="_blank" rel="noopener noreferrer nofollow" aria-label="Share on Facebook">
      <img src="/assets/images/site/facebook-share.svg" alt="Facebook"/>
    </a>
    <a class="share-button share-twitter" href="https://twitter.com/share?url=https://vpetersson.com/podcast/S01E25.html&text=All things ZFS and FreeBSD with Allan Jude" target="_blank" rel="noopener noreferrer nofollow" aria-label="Share on Twitter">
      <img src="/assets/images/site/x-share.svg" alt="Twitter"/>
    </a>
  </div>
</div>
</div>

      <div class="podcast-page">
        <p>In this episode, I’m joined by Allan Jude, a distinguished FreeBSD developer and ZFS expert, to explore the fascinating world of advanced storage systems and operating system architecture. Allan’s extensive contributions to both FreeBSD and ZFS offer unique insights into how these technologies shape modern infrastructure.</p>

<p>We start with ZFS’s architectural foundations. What particularly caught my attention was Allan’s explanation of how copy-on-write mechanisms transform data integrity and storage management. His breakdown of ZFS’s self-healing capabilities and data verification approaches reveals why it remains crucial for enterprise storage solutions.</p>

<p>The conversation gets especially interesting when we dive into FreeBSD’s networking stack. Allan shares insights into why major technology companies trust FreeBSD for their mission-critical operations, backing up the discussion with real-world examples from his extensive experience. His practical deployment strategies bridge the gap between theoretical knowledge and real-world applications.</p>

<p>I was particularly intrigued by our discussion of optimizing ZFS configurations and managing storage pools effectively. Allan’s perspective on leveraging FreeBSD’s security features and his thoughts on the future of storage systems and operating system development show just how much innovation is happening in this space.</p>

<p>If you’re interested in storage infrastructure, operating system internals, or enterprise systems, you’ll find plenty of practical insights here. Allan brings both deep technical knowledge and years of hands-on experience to the discussion, making complex storage and OS concepts accessible while maintaining their technical depth.</p>



        
        
          <div class="transcript">
            <h2>Transcript</h2>
            <details>
              <summary>Show/Hide Transcript</summary>
              <div class="transcript-entries">
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[00:03]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Welcome back to another episode of Nerding out with Victor.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[00:06]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Today we're going to go deep into the world of ZFS and FreeBSD with Alan Jude.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[00:11]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Welcome to the show, Alan.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[00:12]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Hello.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[00:13]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Thank you.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[00:14]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">So you've been around the FreeBSD world for a long time, and I feel like I mentioned before you hit the record button, FreeBSD is not really getting enough attention for their deserves, really.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[00:29]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">So I guess for the people in the audience who are not Even familiar with FreeBSD and the BSD family, maybe can you do a quick intro to, like, why it sets it apart and just some big backstory?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[00:41]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah, I guess we can start with the initial part of the backstory.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[00:44]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So UNIX was originally developed at Bell Labs, which was the research arm of AT&T, the phone company, the only phone company in the US Back then.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[00:55]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so they developed this operating system basically to be able to build things and also to convince management to buy them a big enough computer, also to make printed manuals and so on to do actual work for the phone company.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:12]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But that really was just a side effect of getting a computer they could use to actually write computer programs, a more comfortable environment.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:21]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so they built this, and as it started going out, they found that they wanted people to know how to use it and to find new things to do with it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:32]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So they licensed copies to a bunch of universities.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:36]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And back then, computer programs weren't really the same, and there was no standard architecture.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:43]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:44]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Every computer was a completely different computer that basically spoke a different language.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:49]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so you had to write the operating system and the programs in, like, the compiled to this assembly dialect of that machine, which is completely different from some other machine.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[02:01]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And that's how or what led to the invention of the C programming language, as we can write the code once and compile it for multiple different machines.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[02:11]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Anyway, one of the universities that got a copy of original research, Unix, as it was called, was the University of California at Berkeley.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[02:20]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And they started adding things to it and changing it to be useful for them.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[02:25]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And eventually what they did was they would send copies of it on a tape because floppy disk hadn't been invented yet.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[02:35]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So they'd mail this tape to other universities and other people who would take it and they would change it and they would send back some of their changes.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[02:43]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Of course, you know, we didn't have Git or tools for managing patches.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[02:47]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So it was a little crazy back then.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[02:50]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But eventually some of those changes made it back to Berkeley and they got incorporated and went out to other people on the next Tape.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[02:55]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And that was kind of the precursor to open source.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[02:59]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">No one had thought up licensing or text to put on it yet.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[03:03]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">It was just, you know, this is the program and you use it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[03:06]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And of course every program comes with all the source code and you can do whatever you want with it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[03:12]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But then it turns out, you know, AT&T had ideas about this.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[03:19]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But that went on for a while and really got interesting.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[03:22]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And eventually they added things to it, including the TCP IP stack, which was the invention of the Internet.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[03:29]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And there's some great stories about that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[03:32]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Kirk McKusick, one of the people who wrote the file system for that original Unix or the original BSD Unix has a history series on DVD that talks about some of the really interesting things around the invention of TCP ip.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[03:46]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And there was like a proprietary version and then the BSD version.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[03:50]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And the BSD version was faster at some parts, but worse at other parts.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[03:56]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And the way the story went was the proprietary one was faster, but it would crash.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[04:02]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And in the time while it was rebooting, after it crashed, the BSD one would catch up.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[04:06]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So if you transferred a big enough file, you would still be faster on the BSD1 and things like that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[04:13]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">I didn't even know that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[04:14]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Okay, Yeah, I didn't know that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[04:15]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">I didn't even know that backstory of the TPIP stacks actually.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[04:18]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah, that was, I think BBN it was called.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[04:21]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">It was like way back at the very beginning, like when the Internet was only for the government.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[04:25]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">It wasn't the open Internet yet.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[04:27]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right, right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[04:28]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">It's probably still the arpanet.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[04:29]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yes, and things like that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[04:31]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Anyway, that's a great lecture that Kirk gives that you can catch from other conferences or from history dvd.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[04:40]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But eventually they kind of finished up the last version of that and a company started called BSDI that was going to make a version of this and actually sell it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[04:53]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so they did the port to what was the 386 and made this BSDOS and they were going to sell it to people.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[05:01]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And it was, they were doing a pretty brisk business at the time because, you know, your only other option was Windows or probably wasn't even Windows yet.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[05:11]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Like, yeah, early versions of Windows or like sunos, which was expensive and came with special hardware, whereas the 386 was a cheap machine you could just buy.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[05:20]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[05:23]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But they made the probably ill advised decision to have their phone number to order this software be 100 its Unix.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[05:32]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Whereas Unix was a trademark of AT&T.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[05:36]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And AT&T is like, yeah, no, Also, your code probably contains, you know, our code, which, you know, we charge $1,000 a license for at least, or if not, a lot more.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[05:50]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And you know, you're selling your software to other people for less than that, so you're not paying us.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[05:55]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">How does that work?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[05:56]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And this led to the famous ATT USL lawsuit.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[06:02]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And it turned out there were maybe seven files that needed to be rewritten, but not really.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[06:08]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">I don't think the final details ever really got fully disclosed.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[06:12]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[06:13]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But it slowed BSD down, especially the adoption of it, at just the wrong time, as it turns out.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[06:21]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so in Finland this student named Linus was like, you know, I want a Unix like operating system and oh, I can't use BSD because it's tied up in this lawsuit, so I'll have to build my own.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[06:36]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And that was the start of Linux.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[06:37]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And like you said, if it hadn't been for the AT and T lawsuit, I would have never bothered making Linux and we would just have BSD instead.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[06:46]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">It's a crazy parallel universe, right?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[06:49]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah, yeah, that's a really interesting parallel universe.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[06:53]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Like how that would have affected the evolution of the UNIX wars and what would have happened where and how different life might be just because of the licensing.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[07:04]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So BSD and similar stuff like the MIT license, ISC license, basically the whole license is a couple of sentences that say, you can use this code for whatever you want, but don't take our name off of it and don't claim you were the one that wrote it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[07:20]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so the Sony PlayStation 4 and 5 are based on FreeBSD.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[07:26]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so at the back of the manual there's a bunch of pages of copyright notices that saying, this contains code from this person and this person and so on.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[07:36]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And that's the extent of Sony's obligation, right?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[07:41]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Well, many of the companies that use this BSD software do give back because there's an advantage to doing so.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[07:47]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">You know, if you're taking FreeBSD and building something on top of it, you're making some changes.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[07:52]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">If some of those changes will be your intellectual property or is it the unique selling feature of your product and you want to keep those secret, but there are other parts and smaller features and so on that aren't secret but will be work for you.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[08:06]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Every time you upgrade to a newer version, you will have to reintegrate those, and that's a lot of work.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[08:11]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">If you can contribute those back, they become part of the main line and everybody collectively maintains them, then it's that much easier for you to update in the future.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[08:21]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And really I think the thing that sells it for me the most is the thought of if I buy a washing machine that has the ability to send a push notification to my cell phone when the laundry is done, I don't want it to be using some proprietary or hand built network stack because the people who wrote the software on it didn't want to give back to the gpl which has this viral clause that means any code that touches this has to become open.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[08:52]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So if they're going to use some closed source thing that they bought or write their own thing to avoid that's probably going to lead to a bad time.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[09:01]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Whereas if they can have this standard reference implementation that is under a liberal license, then we're probably all in better shape.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[09:10]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Yeah.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[09:11]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">So that takes us to the modern BSD landscape, I guess, where you have, well, three, well, I guess three major flavors of bsd Open, Free, nat.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[09:22]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">I guess they're all.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[09:23]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">They are the main ones.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[09:24]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">There is.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[09:24]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">There are some derivatives of those I think as well.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[09:27]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">But those are the main ones today.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[09:28]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[09:30]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Can you speak a bit?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[09:31]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Just compare and contrast like real quickly, like for those who.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[09:34]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Not those who are new to BSD and just understand what their strengths are between the three of them.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[09:40]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[09:41]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So back in the early 90s when, after the BSD USL lawsuit was settled and it became possible, these different versions of BSD came out and the first two were NetBSD and FreeBSD.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[09:56]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And NetBSD wanted to focus on portability running on all those different types of computer.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[10:03]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Especially at the time there were, you know, in the early 90s there were still a lot of these older big iron machines around and companies maybe weren't still producing new software for them.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[10:15]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And there were these ideas of other CPU architectures other than the X86.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[10:21]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And NetBSD really wanted to focus on, you know, when a new thing comes out, we can port to it and be running on it really quickly because they saw that as being the future of computers, not this 386, 486 type thing.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[10:35]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So their focus is always on this portability and being able to run on all the different types of CPUs at the same time.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[10:43]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">With FreeBSD the focus was we have this one main architecture, the 386 and eventually the x86.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[10:51]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And we really want to be able to use that as a desktop and a serp.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[10:56]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so that was their book.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[10:58]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">After a couple of years, One of the NetBSD developers had a falling out with the other developers and wanted to do something quite a bit different.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[11:07]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so they forked off from NetBSD and created OpenBSD.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[11:11]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">The main goals there was that the repository, not just the source code, but the repository and the history, would be open to the public and then have a really big focus on security.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[11:23]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And it's come to the point where OpenBSD is mostly kind of like the original Unix, an environment for the developers to do things, whether that's their everyday things or building and kind of this incubator for all these ideas of different ways to do security.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[11:41]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So on top of their other enhancements, they've done the idea of privilege separation.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[11:47]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So one of the things that's kind of maintained inside the OpenBSD project is OpenSSH, the SSH server that's used in every operating system.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[11:56]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And originally that had this one bigger binary that ran as root and then could spawn, you know, every time you logged in.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[12:04]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But that's now been split up into separate tools so that if one gets compromised, it's running without the same level of privileges that, you know, any risky processing is done as like a less important user that can only communicate over interprocess communication with the main process that has all the privileges, so that less chances of it being exploited.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[12:28]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[12:29]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And then they've taken that idea further and further as they've gone.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[12:33]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But one of the other really interesting ones they do is they actually relink.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[12:38]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So not compiling, but assembling the bits together, the kernel every time it reboots.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[12:45]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So as it's booting up, it makes a new kernel for next time, basically.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[12:49]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And it puts all the pieces together in a random order so that no machine will be exactly the same for an exploit to be able to know where it's going to find like the.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:00]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Certain functions for memory injections or for memory attacks, essentially.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:04]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:04]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">For basically any kind of memory attack.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:06]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Where you're going to try to find these gadgets to string together, do an exploit.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:10]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Every time this machine reboots, it'll be different.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:12]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And that means every machine will be different and you won't be able to have the same kind of.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:16]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">It'll make the attacker's life that much harder.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:19]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:20]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And they do a lot of interesting work like that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:22]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:23]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">I love the slogan for OpenBSD was no default vulnerabilities for like 10 years or whatever it was, or 15 years, whatever the number is today.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:31]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:31]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And then it became kind of a heck of a long time when there was one.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:34]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">The one time.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:35]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:36]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:37]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">They've Had a really good track record on.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:39]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Yeah, it's pretty cool in terms of just to compare and contrast, do they share kernels or they completely.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:46]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">They just.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:47]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Toolkit.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:48]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah, so the kernels, I suppose technically were close to the same in the very early 90s, but they are very diverged.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[13:57]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Now one of the things that sets each of the three BSDs apart from something like a Linux is that each one is a complete operating system.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[14:07]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">In that, you know, in one repository you have the kernel, the basic utilities, like ls, cat, grep, et cetera, and a bunch of the other pieces.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[14:19]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And all the drivers all live in one source code repository and can be built and run with just that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[14:27]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And in fact, I pretty sure in all three of them that a bunch of the stuff comes with the operating system and then the packages are off to the side and by default there won't be any packages installed.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[14:41]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And then you can maybe you install whatever additions you need on top of the operating system.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[14:46]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Whereas almost every Linux distribution is all right, we take the a version of the kernel, that who knows which one, and we combine it with this bunch of GNU Core utils and other things, and all of those are packages that get installed.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[15:00]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so the concept of having an operating system with no packages in Linux doesn't really make any sense because all of the components of the operating system, including the kernel, are packages.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[15:10]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Whereas in the bsds you have the operating system and then separately you have all the third party package, right?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[15:16]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">And the package managers are rather sophisticated, like the ports from bsd.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[15:21]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">I know that was overhauled a decade ago, right?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[15:24]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">It used to be just tarballs and now that, yeah, they redesigned that, I think, what, 10 years ago.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[15:31]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">I think.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[15:34]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">In the very beginning FreeBSD added this concept of ports, which is basically a separate repository with a directory structure sorted into categories and then each program has a directory and inside it there's a little make file, a little.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[15:49]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Oh, yes, sorry, yes, make.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[15:51]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And in there when you run the right command, it knows, hey, I need to go to this website, download the source code, extract it, check the checksum to make sure nobody's feeding me the wrong source code, extract it, apply the set of patches, maybe run the configure script, compile it, install it, and so on, and make sure it gets installed to the right place and that you have all the information you need to be able to uninstall it and all that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[16:17]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so it did that for a long time and there were binary packages, but back in the early days, the way it worked Was all of those packages were built once at the day of the release and included on a second cd, but they were never updated.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[16:36]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So you had the version of the packages that shipped with the operating system when it came out and if it was six months later, sorry, all you have is this old packages and you'd have to build your own from the ports tree and that was it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[16:50]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And it was not ideal.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[16:53]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So yeah, I think around FreeBSD8 for reference, we're on version 14 right now.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[16:59]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">With FreeBSD8 we released a new package manager that meant somebody would a tool called Poodra would take that ports tree and recompile it every three or four days because it takes that long to do the build and post it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[17:13]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so you could just do package upgrade and it would download stuff kind of the same as an APT or a Yum or whatever.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[17:19]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah, because I remember the big difference is that gets rebuilt every three or four days.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[17:23]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So it's very fresh.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[17:26]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Yeah, because I remember one of the issues.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[17:29]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">I used to run BSD, FreeBSD specifically many years ago and we ran it at somewhat small scale but like I think, I don't know, 50 servers maybe so smallish scale but I remember do those installations across a fleet of servers where you have to compile everything on every single server and then you have to.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[17:47]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">There were some mechanisms for distributing packages but it's very different from the Linux world, which is apt get installed and voila, that's all you have to care about.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[17:56]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[17:57]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so eventually we added the concept of a quarterly branch.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[18:01]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So on top of those packages built every three or four days, there's a second repo also built every three or four days.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[18:07]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But is the major versions of those packages only change once every three months.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[18:13]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So that you have the choice of basically a rolling release or a quarterly release that's just security fixes every day, but doesn't randomly change from version three to version four of a program in the middle of your cycle so that you can safely just run automated packages.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[18:33]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And the big thing is with that system there's also the available the program called pudrare which allows you to compile those packages yourself.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[18:43]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So if you have that fleet of 50 servers, the big thing that the ports tree let you do is there are configuration options for all these programs.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[18:52]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So you know, you can decide whether you want this program.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[18:56]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Like if you're installing WordPress, do you want it to use MySQL or Postgres as the database or something like that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[19:03]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And there's all These knobs you can tweak, but the packages that come from upstream only have the defaults.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[19:09]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So if you want different options, then you can use podrare and build your own package repository that's going to have those options and be able to use it for all 50 of your servers.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[19:19]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[19:20]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Are those reproducible builds now?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[19:24]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Pretty close to it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[19:25]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">The operating system is fully reproducible and I think the packages are reproducible as well.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[19:31]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">You have to, not necessarily by default.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[19:33]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">You have to set a couple of options to enable it because there's some downsides to faking the date you set for everything.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[19:40]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But yeah, there's a lot of work that's gone into making that more reproducible so that you can take the same source code and the same tool set and build the identical CD for FreeBSD 13.3 to prove that what the FreeBSD release engineering team gave you came from this exact source code.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[20:02]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Yeah, I mean that's super important.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[20:04]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">So let's talk a bit about what actually BSD has been used for FreeBSD in particular, Netflix massive FreeBSD shop, at least was.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[20:12]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">I'm not sure they still are.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[20:13]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">I think they are still using the cdn.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[20:14]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Are they?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[20:15]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Are, are they still running their entire CDN on Netflix?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[20:18]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">On FreeBSD when you are browsing Netflix and picking a video that all runs in Amazon on Linux, but as soon as the video starts playing, that's all coming from FreeBSD.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[20:30]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so yeah, they built this thing called the Open Connect appliance, which was customized server that they could send to Internet exchanges, but specifically to your ISP.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[20:42]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So when they first started they were using commercial CDNs, but that got too expensive and it got to be that Netflix individually was such a high percentage of the Internet traffic that there weren't any more bandwidth providers available that they weren't already busy with Netflix traffic.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[21:01]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so to help ameliorate that, they came up with this concept of the Open Connect appliance, which they would basically send to your ISP and your ISP would install in their data center, so that the most popular videos and TV shows that you're watching would be coming from the box inside their network and wouldn't use any of your ISP's Internet traffic, saving your ISP a bunch of money and saving Netflix a bunch of money.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[21:23]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So it worked out pretty well, and Netflix didn't really invent that concept.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[21:27]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Akamai, one of the bigger CDNs had come up with that before, but not to the same degree that what Netflix did.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[21:34]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so Netflix chose to use FreeBSD for that because of a couple of reasons.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[21:39]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">A the license, although it turns out they don't have any proprietary code that's actually in the operating system, so that doesn't matter so much for them.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[21:46]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But the big thing for them was the speed with which they could upstream stuff.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[21:51]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So when they made a change, they were able to contribute it back to FreeBSD and then have it included in the mainline within a couple of weeks.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[22:00]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so they run the development version of FreeBSD, so not the releases, but actually the development version some number of weeks behind live.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[22:08]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">I think it's like six weeks or something.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[22:12]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so with that they're able to find problems, engineer a solution and get it upstream and then have it ship.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[22:19]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Whereas if they worked with Linux, it would be a lot harder to get a change into the kernel in general.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[22:26]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And if they did, by time a distribution shipped it could be like three years.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[22:34]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">They could do their own thing, but that'd be a lot more work.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[22:37]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And just the fact that FreeBSD has all the infrastructure to basically make your own distribution kind of included made it really easy for them, especially because they ended up making quite a few changes.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[22:49]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">They worked with NIC vendors including Mellanox, which is now Nvidia and Chelsea to design this concept of encryption offload.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[23:00]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So one thing that set BSD apart back in the early days of like FreeBSD4 and like the early Internet, like very early 2000s or in late 90s, was it was really good at being an FTP server and a web server.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[23:16]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Part of that was this system special system call it had called Send File.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[23:21]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So normally, you know, we have a web server, back then it was mostly Apache running in user space and you know, a request comes in over the network and then we have to wake up the web server and say, hey, there's a new request, do you want to accept it?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[23:34]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Web server says, I'm not too busy, I'll accept it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[23:36]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And it would go back to the kernel and then eventually a request comes in and it processes it and okay, I need to open this file.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[23:42]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And now I want to read some data from this file.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[23:44]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And now I'm going to ask the kernel, hey, could you send this to the user?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[23:48]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And then when that's done, tell me and I'll read another chunk of the file and then I'll send it to the kernel.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[23:53]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And it involves a lot of copying back and forth because you know, when the web server asks to read a file, it goes to the kernel, hey, could you read this file?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[24:02]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So the kernel reads it up and then has to copy it from the kernel to Apache.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[24:06]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And Apache doesn't look at it just immediately says, hey, kernel, this buffer you just gave me, could you write it back to this socket instead?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[24:15]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And it was all this back and forth.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[24:17]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So with send file, the web server or the FTP server can just say, hey, I have this socket and this file descriptor of a file I've opened.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[24:24]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Can you send this range of bytes in it to the socket for me and just tell me when you're done?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[24:30]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so now, instead of having to cross that boundary back and forth all the time, you can just say, hey, kernel, just read from this file and write to the socket and do it until either there's an error or you finished the amount I asked you to do.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[24:43]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And that sped things up greatly.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[24:47]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But then HTTPs took off and now we need to encrypt all of that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[24:53]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so that meant we couldn't just have the kernel do it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[24:55]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">You had to still copy it out of the kernel to user space, then feed it through OpenSSL to encrypt it and then send it to the user, which involves copying it back into the kernel.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[25:06]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And this took away a lot of the performance that was available.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[25:09]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So they invented this concept of kernel tls, where basically your web server, now, modern days, usually nginx, will accept that connection, negotiate the encryption with the user, and then once it's done the public key part, right, and proven the SSL certificate and all that, it will have a symmetric key, basically a bulk encryption key.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[25:30]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And it can now set that as a socket option on the socket and then do the send file system call.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[25:38]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And now the kernel has the key it needs to encrypt the data, and it will actually, through a kernel module of OpenSSL, encrypt the data and send it whenever you write it to the socket.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[25:48]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So then the send file system call works again and it allows all this offload so you don't have to copy back and forth.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[25:54]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Which became especially a big deal after Spectre and Meltdown, where crossing that kernel user space boundary required a bunch of extra steps and slowed down a bit.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[26:06]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so that made a big difference there.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[26:08]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But you're still doing the encryption on the cpu, which is fast, but not as fast as it could be.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[26:14]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So Netflix took it one step further after that when they wanted even more performance out of each server where there are dedicated chips on the NICs that can do the encryption.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[26:24]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So instead of sending that bulk encryption key to the kernel, you send it to the kernel, but the kernel sends it to the network card driver, and then it writes the data to the network card driver unencrypted.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[26:35]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And the NIC itself, in its own special CPU, will do the encryption and then send the packet on the network.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[26:44]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so this allows you to offload all that CPU usage to a dedicated encryption chip on the nic.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[26:50]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And this allowed Netflix to originally go from, you know, maybe they could keep 100 gigabit server busy by sending all this traffic.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[27:00]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Now they're up to doing 800 gigabits per second from a single CPU server.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[27:07]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Wow, that's impressive.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[27:09]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Yeah.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[27:09]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">I remember seeing a talk, I think it was EuroBSDcon I went to many years ago.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[27:14]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Netflix did.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[27:15]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">I think it was.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[27:15]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Maybe it was around the time they announced these OpenConnect boxes.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[27:18]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">And I remember them mentioning, because of the volume of traffic they're running through these boxes, the bugs that they discover are things that nobody else basically would have discovered in 10 years because of the sheer volume.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[27:31]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah, I remember there was one early on in the IPv6 stack, which was basically an overflow.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[27:37]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">When you crossed 4 billion of something, it would go back to zero and it caused a problem.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[27:43]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And in general, so they would crash the kernel, but in general, nobody was sending so much traffic that they would do that in less than a month or two, even on a busy host, and probably even longer on another host.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[27:54]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so it would happen infrequently enough that nobody really got overly bothered by it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[27:59]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But when Comcast first switched to having IPv6 for all their customers, and so all those people suddenly switched from V4 to V6, going through Netflix, it would take out a Netflix box every couple of hours.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[28:13]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so they quickly saw the pattern and were able to find the problem and fix it easily and upstream that into FreeBSD and have an errata node so that everybody got the fix.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[28:22]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And it was really interesting just to see that kind of interesting scaling issues.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[28:27]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right, right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[28:28]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">All right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[28:29]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">And also there was a new announcement.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[28:32]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">The German Savant Fund decided to invest some pretty good chunk of change into the Freebies foundation, which I'm sure was very welcome to modernize some infrastructure.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[28:41]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Because how big is the team, like the bsd, the active maintainers?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[28:45]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">How ballpark.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[28:47]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">One of the other big differences with FreeBSD is rather than on Linux, where there's Linus as the benevolent dictator for life, FreeBSD has a core team of nine people that's elected every two years by the developer base, and that entire developer base has write access to the repository, whereas in Linux it's Linus and a dozen lieutenants or so that actually have the ability to merge stuff and you just send them requests.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[29:19]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">With FreeBSD there are 250ish people that can just directly commit stuff into the repositories.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[29:29]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so anybody who's committed things in the last 365 days at the day of the election is allowed to vote.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[29:37]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And that decides the nine people that will kind of be in charge of a project for the next two years.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[29:43]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Interesting.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[29:44]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Okay, yeah.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[29:44]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Different Covenant model entirely then.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[29:46]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[29:47]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so the Sovereign Tech Agency's Sovereign Tech Fund is invested money in FreeBSD to improve some of the infrastructure and try to burn down the BugPal and get things in a more sustainable setup.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[30:00]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And then there's also funding coming from the Alpha Omega project to implement additional two FA and a bunch of other security stuff, including an audit of FreeBSD's native hypervisor.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[30:15]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So rather than KVM that they have on Linux, FreeBSD has something called Beehive, which was originally developed at a vendor, and when they decided they weren't going to use it, they upstreamed it and it became part of FreeBSD.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[30:27]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right, okay, very interesting.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[30:31]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">All right, let's switch gear to the primary topic for this conversation, which is run zfs.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[30:37]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Obviously it's really important to give the backstory of FreeBSD, because that's very tightly coupled with zfs, or at least in the history of it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[30:48]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">So you can run bsd.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[30:51]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Sorry, you can run ZFS on Linux these days as well.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[30:55]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">And maybe we can start there.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[30:58]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">ZFS on Linux and ZFS on bsd.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[31:01]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">And BSD is slightly different.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[31:05]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Maybe talk a moment about that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[31:06]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">How they differ and why they differ.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[31:09]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Well, we can start back at the very quick intro in the beginning.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[31:14]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So Sun Microsystems started developing ZFS because they needed a new file system.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[31:19]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">They had tried a couple of times to write new file systems, but they got the teams kind of too big, too quickly, and it got complicated and they ended up never finishing any of them.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[31:29]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So Jeff Bonwick handpicked a fresh graduate coming out of Brown University, and basically the two of them got locked in a room for a while with a whiteboard and came up with a whole new file system from scratch.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[31:44]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And especially trying to solve a lot of the problems that file systems had at the time.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[31:49]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Because if you think back to the early 2000s, most file systems had a limit on the biggest file you could have.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[31:56]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So depending if you're on Windows, it was like 2 gigabytes was the biggest file you could have.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[32:00]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And some of them you couldn't have a partition bigger than 4 gigabytes.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[32:05]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And weird things like this.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[32:07]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Even on Linux, most of the file systems there was a limit to how big the biggest file you could have is how many files you could have, how big the volume could be.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[32:16]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">All these things were relatively tight limits were actually running into.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[32:21]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Most of them are now big enough that they're harder to run into.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[32:24]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But ZFS was designed with the idea that everything was dynamically allocated so you can't run out of inodes.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[32:31]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">If you throw a billion files at it, you're not ever going to get an error.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[32:35]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Most file systems now still have a limit to the number of inodes.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[32:39]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Some of them can dynamically add more after, like you can run a command to adjust the limit and add more.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[32:46]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But they all do still have a limit, whereas ZFS just doesn't because it allocates them dynamically.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[32:51]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">It's like you can have as many as you need until you run out of space, right?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[32:55]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But the other big thing was every other file system that exists right now.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[33:00]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Traditional file system assumes you have one disk and it only uses that one disk.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[33:06]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">If you have multiple disks, you have to use a volume manager like MD RAID on Linux, or a hardware RAID controller or something to turn that multiple disks into one fake disk that you can then feed to the file system.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[33:18]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">ZFS has that functionality built in so you can give it all your disks and it actually knows that they are individual disks and can do things with them.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[33:27]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Anyway, after a couple of years, sun decided to open source that, because everything at sun was open source, because they found that model was better and it was their competitive advantage over something like Windows.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[33:39]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And So when some FreeBSD developers saw that, they're like, well, you know, Solaris originally spawned out of bsd, yeah, many of the concepts are not that different.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[33:49]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">We'd be able to port this.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[33:51]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so one developer in particular, Pavel Doadek, ported ZFS to FreeBSD.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[33:57]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">You know, he did most of the initial work in a kind of mad sprint over just less than a month of getting it from it's not in FreeBSD to.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[34:07]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">You can actually mount and read write files in a ridiculously short amount of time.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[34:15]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So you did that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[34:16]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And ZedFS started coming into FreeBSD and getting a lot of attention from that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[34:21]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And that continued for a long Time when Oracle bought sun, they closed off the source code.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[34:28]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So a project called the lumos, which is a fork of the last open source version of Solaris, started and previously switched to using that as where it would get newer ZFS features from and where it would contribute its changes back to.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[34:41]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But at that time, each version of ZFS was kind of unique to that operating system.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[34:46]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">It was up to each operating system to kind of maintain their version and try to keep them in sync.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[34:51]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And then the ZFS on Linux project started around that time as well, having their first release a while after FreeBSD, but they've been working on it around the same time that FreeBSD started, and eventually that became the ZFS on Linux project and was also there on GitHub.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[35:10]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And as things changed and some of the companies that were using Solaris and Lumos switched to using other things or just, you know, their time came to an end, less and less new features were being added in the LUMOS repo, and more of them were appearing in FreeBSD and Linux.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[35:28]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And then getting them back into Illumos and then there and then waiting to be able to pull them back in was causing delays, but also just features were being added in different orders and it was getting kind of complicated.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[35:40]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So that student I mentioned who originally helped design ZFS has now been doing it for over 20 years and is the leader of the project.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[35:50]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">He came up with this concept of open ZFS where we would have one repo that was just the agnostic code, just the core of ZFS and not the integration with each operating system.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[36:02]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right, okay.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[36:03]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And we could compile this in user space and run all the tests, and basically have a common code base that each operating system can pull from, add the glue for their operating system and go from there.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[36:15]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But that didn't really manage to go anywhere because that upstream repo by itself wasn't useful because it didn't have the integration for any operating system.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[36:24]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">It was just the common code.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[36:27]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so it meant somebody would have to do a lot of work to be able to actually get that running and build the infrastructure around it to test it, but to no direct value to them or anybody.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[36:39]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so that concept was there and the REPO existed and we'd push and pull code from it, but it was not really working as intended.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[36:50]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So especially as more development started coming in on the Linux side and things were getting kind of done out of order a bit, and it was just getting complicated to, you know, eventually they had a bunch of features that FreeBSD didn't have.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[37:05]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But FreeBSD wanted to pull from Illumos, but Illumos didn't have those features yet.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[37:09]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">It got complicated.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[37:10]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So we looked at the idea of having a real version of the OpenZFS repo, which would be one repository that includes the OS glue for all of the operating systems and means it would be one official upstream code repository that'd be the same on all the operating systems.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[37:28]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[37:29]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so in time for FreeBSD 13.0, that project happened.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[37:34]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so the OpenZFS repo you see on GitHub now actually is Linux and FreeBSD's code mixed together basically under the modules subdirectory, there's an OS directory and there's one for Linux and one for FreeBSD, and all the common code lives in module ZFS.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[37:51]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And then the operating systems have their special bits in those other directories and it means the code is literally exactly the same.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[37:58]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">On FreeBSD and Linux it all comes from exactly the same source code.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[38:02]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">There are one set of files that are different based on which operating system you're running, mostly just to integrate with those kernels which are different and provide what we call the Solaris porting layer, which translates the common codes Solaris calls into Linux.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[38:17]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Or FreeBSD calls for things like allocating memory from the kernel, which is done differently.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[38:22]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Linux has the slab allocator and FreeBSD has the UMA, the Unified Memory architecture and so on.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[38:29]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Right, but it means that we have the same code and we added version numbers so you can actually see, you know, FreeBSD14 and Ubuntu 2404 have basically the same version of ZFS.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[38:41]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right, but there if remind me, there was some issue that held back ZFS coming into mainline Linux for quite some time and it was a license related issue, if I'm mistaken.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[38:51]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Right, and so technically that's still true.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[38:54]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Their ZFS is not included in mainline Linux.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[38:58]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So when sun released zfs, they did it under a license called the cddl, the Common Development License, which is basically identical to Mozilla's MPL that Firefox has released under.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[39:11]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So it says the source code is under this CDDL license, which is mostly liberal, it's not viral or anything like the gpl, but in particular Kadenta clause that when you compile a binary out of it, you can license that binary however you like.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[39:29]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So you can take ZFS and compile a kernel module and license that module as gpl.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[39:37]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">The problem is actually an incompatibility with the GPL where if you make this GPL license ZFS module and link it into your kernel, the GPL license says that should make the source code for ZFS GPL licensed.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[39:52]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And the CDDale doesn't let you do that because that would not make any sense.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[39:57]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[39:58]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so that's where the issues come from.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[40:03]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so it's not included in upstream.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[40:07]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Kind of like was it the bcachefs recently was getting added to Linux and it sounds like maybe it doesn't have a long life left after some arguments between the maintainers.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[40:19]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So ZFS is not included in mainline, but Ubuntu has started shipping it as part of their distro and it turns out nobody's suing them.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[40:28]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so it has kind of become okay to basically for Ubuntu to compile it for you and you load it on your module, whereas, you know, it was always okay for you to compile it yourself and load it on whatever version of Linux you wanted.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[40:43]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But that was a bit of a pain with dkms is not really a pain anymore, but being able to start to get closer to the integration like you can see with FreeBSD, where our bootloader fully supports it and our installer knows all about it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[40:59]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And we build features like boot environments on top of it, which is basically having multiple different root file systems, possibly based on snapshots of your root file system.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[41:08]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Meaning that if you install some new packages and it breaks something, you can just reboot and from your bootloader pick an older version of your root file system and be back to how your system was an hour ago and everything works again.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[41:22]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">It's crazy.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[41:23]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Like one of the things, like I've been using ZFS for well over a decade, I think by now, in one capacity or another.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[41:29]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">And the thing that always strikes me is this is the fastest, but it's very old.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[41:34]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">But it's still probably the most sophisticated file system out there in terms of feature sets.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[41:39]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">And it just keeps chugging along and it's just so reliable, have so many beautiful features that are not widely available across any other file system, really.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[41:49]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Like particularly about snapshots and all these things.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[41:52]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[41:53]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">So let's talk about some ZFF fundamentals.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[41:56]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Like, you obviously is an authority on CFS in your day job, and maybe for those not familiar with your day job, do a quick spiel about what you actually spend in your day and why you're spending your day doing CFS work.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[42:09]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[42:10]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So back in 2018, I founded a company called Clara, which is clarasystems.com and we provide professional development and support services around FreeBSD and ZFS, including ZFS and Linux.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[42:24]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so customers come to us when they hit a bug in ZFS and need help with it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[42:29]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">We sell support subscriptions, and we develop new ZFS features.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[42:33]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So, for example, we developed a feature to be able to delegate a ZFS data set into an LXD container on Ubuntu so that one of our customers could run unprivileged Docker inside a container, but using ZFS so that Docker would be able to use ZFS snapshots and so on.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[42:51]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So when they give, they take your pool in zfs, and in zfs you can have.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[42:56]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So it combines all those hard drives you have into one pool of storage, which you can build multiple file systems that share the free space.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[43:05]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So you don't have the problem of partitioning you used to have.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[43:08]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">If you had a 20 terabyte hard drive and you decide, okay, I'm going to Split this into four 5 terabyte partitions and run the five different workloads on them, and suddenly one of them is only using 1 TB, the other one would like to use 6.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[43:20]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But now that's not where your partitions are.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[43:22]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And you have this problem of like, oh, I don't have enough space over here, but too much space over here.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[43:27]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">By pooling your storage in zfs, it means that you can just use all the space where you need it, and so you can create one of these virtual file systems and then give it to a container.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[43:37]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And inside that container, the fake root user can only see that one and none of the rest.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[43:43]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So they use this to run a CI system for many different customers.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[43:47]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So each Docker workload runs inside a container and can't see the other ones, but does have access to actually create and destroy snapshots and clones and do all the stuff Docker needs to do to run really quickly, taking advantage of the copyright features of zfs.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[44:03]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so, yeah, they came to us needing this.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[44:06]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">We developed it and then we also upstreamed it, included it by default in OpenZFS.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[44:12]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So then when Ubuntu 22.04 came out, it included that feature and they were able to just run stock Ubuntu and have it in production.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[44:20]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Very cool.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[44:21]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">So let's talk a bit about fundamentals in zfs, and you kind of alluded to already, I mentioned pools.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[44:28]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">There are like three building blocks.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[44:30]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">I guess they're V devs, pools and data sets.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[44:34]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[44:34]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">And let's Speak a bit.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[44:36]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Well, maybe the fourth one that I'm not that I'm missing, but let's speak about the fundamentals there.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[44:40]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">So he's like, get big data way.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[44:43]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[44:43]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So like we said, ZFS is a volume manager, so it can also basically do the RAID for you.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[44:49]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so a V dev is one of your kind of RAID components.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[44:54]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So you take all the hard drives you have and then you can combine them in groups called V devs, and that V dev can have a transform on it that makes it do something.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[45:03]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So if you have no transform, you just have each disk as a separate V device, you've basically done a RAID zero, and it means if you lose any drive, all your data is gone, and that's bad.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[45:14]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So you can do a mirror V dev where you're going to have pairs of disks and each display every block you write to some disk.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[45:23]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">The second disk in that mirror is going to have an exact copy of it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[45:26]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And we'll come back to why ZFS does that better, using checksums in a minute.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[45:32]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But then it also has what it calls Raidz 1, which is when you combine any number of drives in a group and it can withstand the loss of any one drive and keep working.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[45:43]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">That's the same as a raid 5, except for it has one slight advantage.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[45:47]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So with raid 5, there's this flaw called the write hole.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[45:53]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Whereas when you update something, it's going to write the new data to the hard drive, and then it has to write to a different hard drive the updated parity, so that if it loses that drive using the parity and the other rows on the remaining hard drives, it can calculate what that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[46:09]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">What data was on that missing drive.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[46:11]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Basically, it adds up the chunks of all of the drives together and gets a value and writes that in the parity.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[46:17]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And then if one drive is missing, it can take that thing, subtract what's on every other drive, and get back the value that would have been on the missing hard drive.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[46:26]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But because it updates the data one hard drive and then updates the parity separately, if the power goes out between those two steps, then the parity is wrong, but the RAID controller doesn't know it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[46:41]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so when it boots up, it takes that parity, subtracts the remaining drives, and gets back the wrong answer.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[46:47]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so now the block you just wrote, isn't there some gibberishes, which is a combination of the new data and the old parity?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[46:55]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Right, Because ZFS is transactional, it doesn't have that problem.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[46:58]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And we'll get back to how that works in a second.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[47:01]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But it also has Raid Z2, which means you combine a bunch of drives and any two drives can go missing and it works.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[47:07]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So that's like Raid 6.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[47:10]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">That's available on some hardware controllers.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[47:12]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">And how many drives do you need for all of these?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[47:15]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Well, V devs, I guess.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[47:16]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">How many V devs do you need for each of these to work?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[47:18]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">I mean, let's call V dev a physical drive, I presume in most practical use cases.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[47:23]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So technically the V dev is generally the transform the group of a bunch of physical drives, right?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[47:27]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[47:28]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So for a raid Z1, technically you need at least two drives, one and the parity.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[47:35]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Although it doesn't make sense to do that with less than 3, because you might as well just do a mirror if you only have two.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[47:40]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah, and the same with Raidz 2.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[47:44]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Technically you only need three drives, but it probably doesn't make sense with fewer than four.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[47:50]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">One of the big additions that ZFS has is Raid Z3, which allows you to group together some drives and lose any three of them and keep going.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[47:58]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">That isn't something any hardware RAID controller I know of can actually do.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[48:03]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">And I may have limited two.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[48:05]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">All you would need technically is four, but you'd probably want six or more for it to make sense where you're going to lose half of them and keep it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[48:14]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Because the big thing is, out of that set, whatever the number is, 1, 2 or 3, that many of the drives basically not going to be used to store your data.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[48:24]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">It's just going to store the parity to be able to reconstruct the data.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[48:27]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Yeah.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[48:27]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Okay.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[48:27]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So if you use four drives in a RAID Z3, you're only going to get the space of one hard drive.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[48:32]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[48:34]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Another thing that's different than most hardware RAID is it doesn't have dedicated parity drives.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[48:38]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[48:39]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">It's not going to be that, you know, if you have six drives in a Raid Z3, that three of them are only going to contain parity.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[48:44]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Z spreads the parity out between the drives so that you get more the bandwidth of the drives when you're writing.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[48:53]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So that provides that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[48:54]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And then.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[48:55]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So each V dev or group of drives is responsible for its integrity.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[48:59]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So it has its own RAID there.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[49:02]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But then we combine multiple V devs if you have enough hard drives, and those are basically just striped together.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[49:08]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so if you lose any one V dev, you've broken the whole pool.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[49:12]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But, you know, if you've used Raidz 3 in each of your VDEVs then it'll be fine.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[49:17]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so, you know, a big server I built many years ago is basically a petabyte of usable space made up of a bunch of v devs of 12 terabyte hard drives in a RAID Z3.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[49:30]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so I think it was like 9 or 10 of these VDEVs.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[49:34]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And that way you get all this space and, you know, as long as you don't lose more than three drives from any group of 12, then everything will be fine.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[49:45]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And, you know, when a hard drive dies, you replace it with a new one and it rebuilds and you're okay.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[49:52]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[49:53]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So that provides that's the V dev layer, and then above that you have the pool, which is basically giving you all the usable space of all those drives put together.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[50:02]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And it means that out of that you can create these virtual file systems called data sets.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[50:07]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And they're the same thing as kind of like an ext4 file system or whatever.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[50:13]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And you could have multiple of them, but each one will show up as a dynamic size where basically they are the amount of data they contain plus all the remaining free space in the pool.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[50:22]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right, right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[50:23]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So if you have five of these file systems, each one will say that it has 20 terabytes of space left.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[50:30]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But if you write to any one of them, all five of them's free space will go down by the amount you changed.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[50:35]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">So kind of over provisioning in a sentence.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[50:37]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah, yeah, except for we're not actually lying and saying that we have more on any of them.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[50:42]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And as you write stuff to them, the free space on all of them will go down.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[50:46]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But as you delete something one of them, the free space on all of them will go back up.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[50:50]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[50:51]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Unless you have snapshots, which we'll get to in a second.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[50:55]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so that allows you to have different settings on each data set as well.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[51:00]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So ZFS has a feature called transparent compression, where you can set compression on the data set that contains my home directory, but not the dataset that contains my music or something.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[51:10]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[51:12]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And what this is, as you write the data to ZFS, it will use a fast compressor like LZ4 or Zstandard to shrink the size of those.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[51:22]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And then on disk, it'll actually store the compressed version, and then when you read the file back, it'll decompress it first before it gives it to you.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[51:28]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So the application doesn't have to know that there's compression happening, but the file system takes care of it for you.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[51:34]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And then all your, you know, the Many, many copies of the ZFS source code I have on my server take a lot less space because source code is text and compresses really well.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[51:44]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[51:45]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">And what's overhead?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[51:47]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Let's talk about compression for a second, because I think that's a super interesting one.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[51:50]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Like what's the.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[51:51]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">On a modern server, let's talk about ZZ standard, like a basic compression or the basic one, I think, in ZPass.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[51:59]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">What's the overhead, CPU wise, I presume would be the big impact.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[52:03]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[52:04]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[52:04]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So that's the interesting.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[52:05]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">With LZ4, the overhead is quite minimal.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[52:09]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">It can compress multiple gigabytes per second per core.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[52:13]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So as long as you have a couple of cores, you're probably going to run out of performance on your storage, even if it's NVME before you run out of CPU time.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[52:21]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Interesting.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[52:23]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And it can actually end up being faster because if you have 100 gigabytes of source code you're trying to or 100 megabytes of source code you're trying to write, and a regular spinning hard drive that can write 100 megabytes per second, then it would take you a second to save that 100 megabytes of source code.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[52:39]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">If you can compress it at 2 gigabytes per second, so it takes a fraction of the second to compress it, and it compresses down to 50 megabytes, you write it to the hard drive and it only took half a second.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[52:53]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So it means technically, if you had more source code, you could write 200 megabytes a second to this hard drive if your compression ratio is 2x.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[53:01]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So in exchange for a little bit of CPU time, you could make your hard drive seem faster only if the data is actually compressible.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[53:08]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And the same thing applies when you read.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[53:10]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Now, when you read, you only have to read 50 megabytes in order to read all 100 megabytes of the data.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[53:16]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And LZ4 decompresses at over 10 gigabytes per second per core.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[53:21]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[53:22]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so it can end up making a lot of workloads faster.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[53:26]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Interesting.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[53:26]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Are there any?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[53:28]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Because I believe compression is disabled by default.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[53:31]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So as of version I think 2.2 compression is on by default.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[53:35]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Okay, it's now to the point where it's so fast it doesn't have a penalty if you try to Compress things like MP3s or video files that are uncompressible or even encrypted files.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[53:49]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Computers are so fast now that it basically doesn't have a high enough cost.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[53:53]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[53:54]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">There's also a feature in ZFS called Early Abort where it can notice.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[53:58]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">I've been compressing this chunk for a little bit and I noticed that it's not compressing enough that it's going to be smaller enough to matter.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[54:06]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Basically if it's not going to save you at least 12% if it becomes obvious we stop and don't finish trying and just store it uncompressed.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[54:14]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Okay, so there's like.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[54:15]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Okay, interesting.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[54:16]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Yeah.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[54:16]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Because I mean if you are chucking compressed files on the compressed compressor, that's not going to make much.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[54:21]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Yeah, that's just going to happen.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[54:22]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">It's just going to use up a bunch of CPU time.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[54:24]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Now LZ4 is so cheap it doesn't make a big difference, but it will also notice and give up early in order to save some of that CPU time.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[54:31]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right, okay, so there's what you're saying essentially there is no reason not to use it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[54:36]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Exactly.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[54:37]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">It's now to the point where you might as well just have LZ4 on everywhere and it will help you where it can and it won't make a big difference where it doesn't help.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[54:44]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[54:45]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">I would imagine back in the early days that was quite not the case.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[54:48]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[54:48]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Well, especially before LZ4 there was only basically LZMA which wasn't or not LZGB which wasn't as good.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[54:57]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And gzip.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[54:59]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And gzip can compress better, but it is slow.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[55:03]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Like gzip will top out at like 50 or 100 megabytes per second per core.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[55:07]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And yes, that will you will run out of CPU before you run out of storage bandwidth.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[55:12]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So gzip will really hurt you.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[55:14]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">As far as CPU usage, Z standard supports 19 different levels in ZFS and so you can tune it from only use a bit of the CPU to use all the CPU.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[55:24]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But if you use up to 19, it will only compress at like a single digit megabytes per second.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[55:30]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So you only want to use that one when it's like I'm writing this once, I know it's compressible and I'm just going to keep it forever.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[55:36]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And it'll be worth it to spend the CPU time to compress it that much.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[55:41]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[55:42]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But we also added a feature I think in 2.2 or 2.3 where if you enable a really high Z standard level, it will quickly try to compress it with LZ4 first and see if LZ4 couldn't compress it, we assume Z standard won't be able to compress it and we just won't even try.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[55:59]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Whereas if it does compress it, then we'll let it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[56:01]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so it allows you to skip trying the heavy compression on files that are definitely not compressible, again to avoid the overhead and let you just kind of turn it on without having to worry that it's going to spend a lot of time trying to compress things that aren't important or not compressible.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[56:18]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[56:19]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Okay, so we talk about data sets.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[56:21]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">One thing about datasets that I found important is that you can run encrypted datasets on top of a pool.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[56:27]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[56:27]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">So you could have non encrypted or you could have some encrypted, Maybe speak a bit about how that works because that's kind of a relatively unique feature as well to zfs.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[56:35]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah, so most block level systems have some kind of encryption.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[56:41]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So on Linux there's lux and on FreeBSD there's Gelly.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[56:44]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And these use an algorithm called aesxts, which is whole disk encryption, and they use a key and they encrypt the data on the disk.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[56:54]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">With zfs, we wanted more granularity.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[56:58]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So yeah, we have these multiple different data sets.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[57:00]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And maybe I want my operating system non encrypted so it's easier to boot from and so on, but I want my home directory encrypted.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[57:08]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so it uses AES gcm, which is the encryption normally used for like HTTPs, and it encrypts not the structural information.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[57:20]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So like the name of the data set and the ZFS specific bits are not encrypted because it needs to be able to work on those.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[57:26]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But basically the file names and the actual data in the files are all encrypted.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[57:33]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so earlier we mentioned the checksum.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[57:37]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So ZFS stores a checksum of every block so they can verify that the block didn't get corrupted by your hard drive.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[57:43]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Or as we mentioned, when you're doing a mirror in traditional mirroring with hardware, RAID or md, RAID and so on, if the two sides of the mirror don't match, there's no way to tell which one is right and which one's wrong.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[57:56]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah, instead of S, because we store a checksum separate from the data, we can read both pieces of data and see which one matches the checksum and know, oh, the SHA256 says copy two is the right one.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[58:06]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so we'll repair copy one with the right copy.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[58:11]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">When we encrypt files we split that checksum in half.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[58:14]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">We keep the first half of the SHA256.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[58:17]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And in the second half, we keep the message authentication code from the encryption.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[58:23]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">This allows us to verify both bits, the raw encrypted data on disk, that it's not corrupted.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[58:30]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And the Mac ensures that when we decrypt the data, we got the right data back and that it hasn't been tampered with.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[58:36]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">This means that unlike whole disk encryption, where if you mount the file system, you have to have entered the decryption key and now everything's decrypted.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[58:46]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">With zfs, if you have your home directory and somebody else's home directory, those are encrypted with different keys.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[58:52]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And when the other user is not logged in, they can unload their key and that data is actually at rest and encrypted and can't be accessed by anybody until they come and enter the key, maybe by logging in over SSH and using their passphrase.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[59:06]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so that allows that data to actually be protected.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[59:08]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Whereas if you just used whole hard drive encryption, that really only protects you against somebody stealing the physical machine.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[59:14]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And then when they reboot and try to access it, they don't have the key and they can't decrypt the hard drive.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[59:18]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Whereas with zfs, you can unload this key.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[59:21]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And now nobody can access this data without entering the key first.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[59:26]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So it allows you to keep the data at rest and have the protection from encryption without having to power off the server to get the protection.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[59:35]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[59:37]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But importantly, because we split that checksum in two, it means that we can still run the repair of a failed hard drive on the encrypted data without needing the encryption key.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[59:50]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Oh, right, okay.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[59:51]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so it can, it knows from the first half the checksum that, hey, that block is not right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[59:57]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">The hard drive flipped a bit or something and, or, you know, we've drive failed and we put in a new one and we can rebuild all the data and get the array back healthy without ever having to have the encryption key.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:00:09]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So it means the storage administrator doesn't need all the encryption keys, which was a big advantage.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:00:14]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:00:15]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So a use case that came up with this for one of our customers being a law firm was, you know, we have all this discovery evidence from a case.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:00:22]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">The case is now over.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:00:24]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">We have to destroy that evidence and not have a copy of it anymore.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:00:28]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But, you know, we can't be sure that our flash drives are actually going to erase anything we erase.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:00:34]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So overriding is not necessarily going to be good enough.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:00:36]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And if we use whole disk encryption, we'd have to Reformat the whole hard drive in order to actually ensure that it's gone.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:00:43]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But by having a different encryption key for each case's data set, they can just unmount it, destroy the key and never be able.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:00:50]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">That data is not recoverable now, and it makes their life much easier for doing that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:00:55]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">So you mentioned two types of, I guess, unlocking.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:00:59]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">There's the key and there's the passphrase.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:01:02]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">One thing that at least I've been bothered with, both in the Linux world and in the BSD world, I guess, is that in most other operating systems you can use a TPM to unlock and lock and do disk encryption.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:01:15]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">That is not quite the case.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:01:17]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">It's kind of possible on Linux.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:01:19]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">I don't know how it is in the BSD world, but do you want to say a few words about the narrative around that?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:01:25]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">If that's something that is being worked on or particular encryption, I guess, yeah.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:01:32]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">I've not really looked at the full disk encryption stuff in a while because I've been more focused on zfs.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:01:37]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But I did do support for the full disk encryption in FreeBSD's bootloader years ago.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:01:45]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So yeah, there is interest in doing the tpm.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:01:47]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So what ZFS has right now is you can load the key basically by typing it in by having a path to a file or having a URL to like an API.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:01:58]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So you can actually have, as the machines boot up, they call some other machine to say, hey, it proves with a certificate or something that I'm part of your network.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:02:08]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And that server says, okay, here's the key to decrypt that data.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:02:11]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">So you type it in.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:02:14]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah, but we would definitely be interested in using the TPM to store the key material.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:02:22]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Just no one's come with that use case.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:02:24]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So if you would like ZFS whole disk or dataset encryption to use the TPM, then definitely go to Cloudystems.com and click on the ZFS button and tell us you want that feature and we'll talk to you and definitely get that built because there's some interest in it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:02:40]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">We just would need somebody who has a commercial interest in it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:02:43]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Yeah, no, I had a more personal interest.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:02:46]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">I use ZFS on my Just Home server, my Boxbox server.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:02:54]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">And just when you reboot the server and you have to manually type in a passphrase and you don't have a KVM or something hooked up to it, that is a pain point, right?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:03:02]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah, exactly.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:03:03]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And that's why some people use that HTTP thing to fetch the key from another machine that's going to have stayed up, hopefully, or whatever, some kind of zero trust environment where before you can have this encryption key, you have to prove that you're not a compromised machine and you're the machine that's supposed to have this decryption key and so on.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:03:21]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Yeah, exactly.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:03:23]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Cool.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:03:24]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">We talked a bit about what we kind of alluded to, scrubbing.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:03:27]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">I guess maybe you should just knock that out as well, what scrubbing is and how it's different than other profile systems.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:03:32]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:03:33]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So that kind of depends on checksumming.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:03:35]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So as ZFS writes, any block of data you give it stores.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:03:41]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So in the indirect block where it actually says, you know, the fifth megabyte of that file is on this offset on disk, it has information about it like when we wrote it and the checksum.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:03:53]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so a scrub is basically a patrol read where it goes through your whole disk and reads every block and checks that the checksum is still what it's supposed to be.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:04:02]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so this allows it to detect bit flips on your hard drive or bitrod or any kind of corruption.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:04:08]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so ZFS scans all the data and makes sure that the checksums are correct and fixes them.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:04:13]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">They aren't.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:04:14]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Because if you have bitrot, it usually kind of.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:04:17]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">It's creeping.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:04:18]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">It starts small and gets bigger and bigger.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:04:20]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So when you catch it and fix it means that, you know, if you have a RAID Z2 where you have, you know, eight hard drives and two of them are providing parity, if you find a bit flip and fix it, when you find the second bit flip and fix it, you had all the data you need to reconstruct it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:04:36]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Whereas eventually, if you had three bit flips, you wouldn't have enough data to fix it if all three were in the same file.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:04:43]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But if you once a month are reading all the data, making sure the checksum is correct, it means you fix each of those errors as they come up and they don't accumulate to the point where you actually have data.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:04:54]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:04:55]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Yeah.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:04:55]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">I had Brian Kantra from Oxide on the show a few episodes ago, and he was giving some story from Illuminus when they were running that, and how they discovered driver issues and issues with IO controllers, essentially where they basically was, because of the intelligence of zfs, they were able to pick up things that otherwise would have gone undercover.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:05:15]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Really?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:05:15]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:05:16]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And we've hit similar cases.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:05:17]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">We had one customer using like an early version of an all Flash array, and occasionally ZFS was finding this corruption.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:05:24]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And it turned out there had been A firmware bug and a rounding error or something meant that certain writes would get written to the wrong place.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:05:31]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So when you read from the right place, the data wasn't there.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:05:34]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And when you read what was supposed to be at the wrong place, it had been overwritten with this other data.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:05:40]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And ZFS was able to point it out and we eventually found the pattern and they were able to fix the firmware.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:05:45]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Nice.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:05:47]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Snapshotting is not a thing you've hinted at.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:05:50]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yes, the really interesting one.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:05:52]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So other file systems in the past have had snapshotting like you think of.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:05:55]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Even KVM with Qcow2 has this concept of snapshotting.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:05:59]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But in other file systems, the way snapshotting worked is, you know, you have your normal file system, when you change a file, we just overwrite it in place.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:06:07]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But if snapshotting is enabled, then we'll detect that and we'll, oh, write the new change to a different place instead and keep both versions.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:06:14]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So that meant there was this cost.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:06:16]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So like, if you use the snapshots in lvm, as soon as you have one snapshot, your performance gets cut like in half.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:06:21]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And then you have a second snapshot and it's half of that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:06:24]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so if you have like eight snapshots, you're at like, you know, 10% of your original performance.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:06:28]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">It's pretty terrible.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:06:30]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">With ZFS, it works differently.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:06:33]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Every time we make a change to a file, an existing file, we always write the blocks to a new place.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:06:39]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">If you have no snapshots, the old place after a couple of seconds just becomes free space and can be reused later.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:06:45]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But if we have a snapshot, then we know to keep that data.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:06:50]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So basically I mentioned one of the bits of metadata we have along with the checksum is the time when the block was written.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:06:57]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And this is measured in transaction groups since the pool was created.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:07:00]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So when you create a snapshot, it's mostly just remembering the time of the snapshot.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:07:04]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so when you overwrite some data, if it's before that snapshot, then we need to keep it, and so it won't erase it and it'll just keep going.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:07:15]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So it means when you're writing while having snapshots or reading, there's no extra work to do.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:07:20]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">We're actually doing less work because we're not freeing that space because it's referenced by the snapshot.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:07:26]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Then later when you delete the snapshot, it can go through and say anything that's older than the now oldest snapshot.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:07:34]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">We don't necessarily need that anymore.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:07:36]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so it can go and free it and make the free space.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:07:39]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">That's very cool.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:07:40]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So the copy and write nature of ZFS also provides the other big thing.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:07:44]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Especially in the early 2000s, there was this problem where if your server ever got rebooted unexpectedly, when it came back up, it had to run an FSCK and check all the stuff to make sure your directories weren't corrupt or whatever.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:07:56]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah, on bigger hard drives that could take days.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:08:00]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And have your operating system not fully running for days was not an option.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:08:04]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Eventually that was mostly kind of solved with journaling, but to a limited degree with zfs.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:08:11]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">The way it works is using those transactions.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:08:14]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Any changes you make get accumulated in a transaction group and then written out.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:08:17]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And by default that happens every five seconds or more frequently if you're pushing a lot of data and it's getting full.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:08:28]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But this means that, you know, in an overriding file system, if you're in the, you know, just made a bunch of changes to a big Excel file and hit save and the power goes out halfway through saving.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:08:39]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">On a regular file system, you would have overwritten the first half of the original copy of the program or the Excel file with the new version, but the second half didn't get written yet because the power went out.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:08:49]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So when you boot back up, you have half the new file and half the old file.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:08:52]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And correl Excel is just going to say, that's gibberish.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:08:55]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">I can't make sense of that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:08:58]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Whereas zfs, the new file was being written over here and we only have half of it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:09:04]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so that transaction didn't finish, so the checksum won't match.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:09:07]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So when it boots up, it'll just say, okay, that one didn't finish.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:09:10]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">We'll go back to one previous that is completed and do that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:09:14]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And then ZFS has this concept called the ZFS Intent log or zil, where any time an application asks for a promise that the write I just did is on disk before I continue, like a database would, that gets written to the xil and then when you reboot after the crash, the XIL will replay those changes and make sure that everything we promised actually got finished.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:09:36]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Like a wall login postgres.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:09:39]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Exactly.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:09:39]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But that for the file system and this way we go from the file system was perfect to the file system was perfect without ever having to be in that in between state.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:09:49]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Because it's in between state, we kind of roll back like a database.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:09:52]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so it doesn't have this need to fsck.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:09:56]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Other file systems do super interesting.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:09:59]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">The last feature that I wanted to cover, which I think is a very neat feature as well, is the ZFS send, which is kind of clever feature as well for like, shipping data across systems, really.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:10:09]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">So maybe speak a bit about that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:10:11]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:10:11]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So basically it allows you to serialize a file system into a stream that you can send over the network.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:10:17]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Technically, you could send it to a file and then receive it on a different computer much later, but usually it makes more sense to just do it directly, because having a giant file full of a stream of the file system isn't as useful as if you receive it, you have that same amount of space, but as a usable copy of the file system.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:10:36]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:10:38]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But its power really comes from its ability to do incremental replication, where after you've sent the whole file system based on a snapshot, if you make a newer snapshot, you can send the difference just between those two.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:10:49]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And that depends on what we had just talked about, those transactions and the transaction group id.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:10:56]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So when you created the first snapshot, were at, say, transaction 1000, and when you created the second one, were at, say 1100.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:11:04]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So now when you say send the difference between snapshot one and snapshot two, ZFS just has to look for blocks that have a birth time between those two numbers.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:11:11]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Oh, neat.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:11:12]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Okay.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:11:12]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so we can just scan all those blocks and say, okay, any block that has a birth time greater than a thousand, but up to 1100, we're just going to feed it into the stream, and on the other side we'll just receive those.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:11:25]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so compared to doing a backup with something like rsync, where it's going to walk through every single file in your system and run stat on it and be like, when did you last change?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:11:34]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">When did you last change?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:11:35]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And only.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:11:36]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And if a file is huge, but it was touched, rsync has to read the whole file on your side and read the whole file on the far side and check the checksum of the chunks and then to figure out which blocks changed.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:11:51]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Whereas ZFS just looks at the time on each block in the metadata without having to read the data and says, okay, only these seven blocks change.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:11:59]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So it just sends those seven blocks and it's done.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:12:02]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Interesting.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:12:03]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so ZFS is able to basically saturate the network and do the backup in a couple of seconds, where Rsync might take a whole day to copy that same couple of blocks, because it has to check every file, and then if the file is newer, it has to read the whole file on both Sides and decide which blocks are actually different.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:12:20]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Whereas ZFS just natively knows because it has a timestamp for each block of the file instead of just the whole file.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:12:26]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:12:26]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">And I guess if you send it on a network, you would just pipe it through something that's encrypted and then receive it and decrypt it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:12:31]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Yeah.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:12:32]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Okay.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:12:32]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Well, also, if your data set was encrypted on zfs, you can do a raw send where it'll send the encrypted version without decrypting it to the other side.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:12:42]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And then that way the data is never decrypted on the far side.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:12:46]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so if they don't have the key to decrypt it, they only have a backup of your data that they can send back to you, but they can't ever mount.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:12:54]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Right, okay.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:12:56]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">The thing lots of people are after.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:12:58]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:12:58]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Are there any hosted services I know obviously a fellow Canadian call in is running tarsnap.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:13:05]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Are they supporting that ZFS send as torch now?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:13:09]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Because that would be an interesting service offer to basically ship.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:13:12]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">They're not.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:13:13]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So the two services I know of are ZFS Rent, where they will basically rent you a hard drive in a VM that you can do that to and then rsync.net has a thing where they will basically stand up freebies to your Linux in a VM and sell you five terabytes of space that you can ZFS receive your encrypted data sets to.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:13:36]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Or not encrypted if you don't care.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:13:39]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Interesting.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:13:40]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">All right, so the last thing I want to round up the episode on is Tales from the Trenches.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:13:45]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Obviously you've been around the data world for quite some time and I'm sure we've seen a lot of horror stories around this.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:13:52]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">So I kind of want to hear from your side what's the craziest and more like bizarre data recovery missions you guys been on trying to recover data on GMS clusters or in general?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:14:03]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Yeah, we've done quite a few different ones.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:14:07]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">We just did a webinar on Halloween that we'll drop a link in here for, but if you go to clarasystems.com and click webinars, you'll find our Halloween horror stories.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:14:17]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So I won't cover one of those because they're all really good, but I just did them.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:14:21]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So another one we did, there was an interesting one at a university where they had just made a bunch of changes and we had helped them with those and it was fine.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:14:33]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And then so they had a high availability system where they'd have a JBOD full of hard drives connected to two different servers so that if one server goes down, they could import the pool on the other one.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:14:47]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And they had a bunch of these pools and they had just numbered them like everybody does.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:14:52]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">This is not the same as the war story in the Halloween one where a similar thing kind of happened.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:14:56]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But after importing them, after doing the upgrade, they accidentally did import pool 4 on server 4 and then went to server 5 and accidentally typed import pool 4 instead of pool 5.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:15:11]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So now pool 4 was mounted on two machines at the same time, which isn't supposed to be able to happen because they didn't enable the feature that stops it because there's a trade off for it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:15:23]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But so now every time there's a new transaction group, server 4 is writing to the hard drive and then server 5 is writing different information with a different transaction group number over top of that.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:15:34]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so they're just sitting there writing over top of each other, somewhat being correct and somewhat not.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:15:39]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And also meaning that if you wrote different data on different servers, they're going to not know that the other one has used a certain bit of space.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:15:47]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So think it's free and allocate it and basically overwrite something Server 4 just wrote with something different that Server 5 just wrote.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:15:54]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And you can really corrupt things really badly.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:15:58]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">They managed to catch it after I think it was about 25 minutes or so.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:16:02]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so they shut everything down and called us and things were quite broken and we had to invent some new tools to be able to fix it, but eventually got to the point where we could do a version of ZFS sen to copy all the data to a spare machine they had so that they could get most of their data back, except for obviously the newer stuff they had overwritten and a couple of pieces got damaged.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:16:26]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But we managed to get most of the data back by basically being able to do ZFS send.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:16:32]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And the big advantage there over copying it some other way was just the speed, the fact that we could saturate their 10 gigabit network.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:16:38]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And when you're talking about hundreds and hundreds of terabytes of data, it's really slow to copy.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:16:44]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So you really need a way to try to do that quickly.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:16:48]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Good stuff.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:16:50]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">This has been very helpful and I think hopefully opened the eyes to ZFS to a new audience.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:16:57]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">And I think it's well worth shouting about because I think it's a fantastic file system.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:17:03]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">So I'm very happy to wider adoption for it.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:17:06]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">So thank you so much for coming on the show, Alan.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:17:10]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Very much appreciated.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:17:11]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Any last words about Clara?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:17:13]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Something you want to say, you want.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:17:14]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">To draw attention to?</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:17:16]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">If you have.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:17:17]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">If you want to learn more about zfs, I do a weekly podcast where we tend to answer quite a few people's questions.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:17:23]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">They write in about ZFS.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:17:24]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So that's 2.5 admins.com so 2 and a half admins.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:17:28]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">It's a podcast with myself and another ZFS admin, Jim Salter, and a host who's trying to become a sysadmin.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:17:34]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So we have two and a half admins.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:17:36]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">So if you're into sysadminning in general, or ZFS specifically, you want to check out that podcast that comes out every Thursday.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:17:44]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And there's also we have a website, practicalzfs.com where we have a discourse set up replacing the old Reddit rzfs.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:17:53]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">And so it's a place where people ask a lot of ZFS questions, we answer them and kind of collect a whole thing there.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:17:58]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">But yeah, if you need support with ZFS or feature development or same for freebsd, then do hit us up at clarasystems.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:18:07]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Com.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:18:07]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Amazing.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:18:08]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Again, thanks so much for coming on the show, Alan.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:18:10]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Have a good one.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:18:11]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Talk soon.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:18:11]</span>
                      <span class="speaker">Viktor Petersson</span>
                    </div>
                    <div class="text">Cheers.</div>
                  </div>
                
                  <div class="transcript-entry">
                    <div class="transcript-meta">
                      <span class="timestamp">[01:18:12]</span>
                      <span class="speaker">Allan Jude</span>
                    </div>
                    <div class="text">Bye.</div>
                  </div>
                
              </div>
            </details>
          </div>
        

        
        
        <p class="file-pr">
          Found an error or typo? File PR against <a href="https://github.com/vpetersson/vpetersson.com/blob/master/_podcast/S01E25.md">this file</a> or the <a href="https://github.com/vpetersson/vpetersson.com/blob/master/_transcript/s01e25.json">transcript</a>.
        </p>
      </div>
    </div>
  </div>
</div>

<style>
  .video-container {
    position: relative;
    padding-bottom: 56.25%;
    height: 0;
    overflow: hidden;
    border-radius: 1rem;
  }

  .video-container iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  .transcript {
    margin: 2em 0;
    width: 100%;
  }

  .transcript h2 {
    margin-bottom: 1em;
    color: #fff;
  }

  .transcript details {
    margin-bottom: 1em;
  }

  .transcript summary {
    cursor: pointer;
    color: #fff;
    padding: 0.5em 0;
  }

  .transcript summary:hover {
    opacity: 0.8;
  }

  .transcript-entry {
    display: grid;
    grid-template-columns: 1fr;
    gap: 0.5em;
    margin: 1em 0;
    padding: 0.5em 0;
  }

  @media (min-width: 768px) {
    .transcript-entry {
      grid-template-columns: 150px 1fr;
      gap: 1em;
    }
  }

  .transcript-meta {
    display: flex;
    flex-wrap: wrap;
    align-items: baseline;
    gap: 0.5em;
  }

  .timestamp {
    color: #fff;
    font-family: monospace;
    font-size: 0.9em;
    white-space: nowrap;
  }

  .speaker {
    font-weight: 600;
    color: #fff;
    white-space: nowrap;
  }

  .text {
    line-height: 1.5;
    font-style: italic;
    color: #fff;
  }

  @media (max-width: 767px) {
    .transcript-meta {
      margin-bottom: 0.25em;
    }

    .text {
      padding-left: 1em;
    }
  }
</style>

    </main>
    <footer class="py-[60px] md:pt-[74px] md:pb-[40px] px-[25px] md:px-[120px] text-altPrimaryText">
  <div class="mb-[60px]">
    <a href="/">
      <img class="w-[200px] md:w-[320px]" src="/assets/images/site/logo.svg" alt="logo" />
    </a>
  </div>
  <div class="flex flex-col lg:flex-row lg:justify-between lg:items-center mb-8 lg:mb-6">
    <nav class="flex flex-col md:flex-row gap-6 md:gap-8 mb-20 lg:mb-0">
      
        <a href="/" class="">HOME</a>
      
        <a href="/about" class="">ABOUT</a>
      
        <a href="/consulting" class="">CONSULTING</a>
      
        <a href="/podcast" class="">PODCAST</a>
      
        <a href="/blog" class="">BLOG</a>
      
        <a href="https://studio.viktopia.io/" class="">VIKTOPIA STUDIO</a>
      
    </nav>
    <div class="flex gap-[13px]">
      <a href="https://twitter.com/vpetersson">
        <img src="/assets/images/site/x.svg" alt="x logo" />
      </a>
      <a href="https://github.com/vpetersson">
        <img src="/assets/images/site/github.svg" alt="github logo" />
      </a>
      <a href="https://www.linkedin.com/in/vpetersson/">
        <img src="/assets/images/site/linkedin.svg" alt="linkedIn logo" />
      </a>
    </div>
  </div>
  <hr class="mb-8 lg:mb-10 bg-[#000212] h-[3px] bg-opacity-20 border-0" />
  <div>
    <p class="font-[Inter] text-base">&copy; Viktor Petersson</p>
  </div>
</footer>

    <script src="/assets/js/main.js" defer></script>
    <script src="/assets/js/code-blocks.js" defer></script>
  </body>
</html>
