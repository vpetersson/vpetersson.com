{{ define "main" }}
<div class="bg-secondaryBG px-4 sm:px-6 md:px-12 lg:px-[145px] py-[60px] md:py-[80px] lg:pt-[100px] lg:pb-[73px] min-h-[600px]">
  <div class="w-full xl:max-w-[680px] m-auto">
    <form class="text-center mb-20" action="/search" method="get" role="search">
      <label for="search-box" class="sr-only">Search the site</label>
      <input class="search-input" type="search" id="search-box" placeholder="Search" name="query">
      <button type="submit" class="w-full md:w-auto">Search</button>
    </form>

    <ul id="search-results" class="search-results"></ul>
  </div>
</div>

<script>
  window.store = {
    {{- $blog := where site.RegularPages "Section" "blog" -}}
    {{- $podcast := where site.RegularPages "Section" "podcast" -}}
    {{- $all := union $blog $podcast -}}
    {{- range $i, $page := $all -}}
    {{- if $i }},{{ end }}
    "{{ $page.RelPermalink | urlize }}": {
      "title": {{ $page.Title | jsonify }},
      "content": {{ $page.Plain | jsonify }},
      "url": "{{ $page.RelPermalink }}",
      "type": "{{ $page.Section }}"
    }
    {{- end }}
  };
</script>
{{ $search := resources.Get "js/search.ts" | js.Build (dict "targetPath" "js/search.js" "minify" hugo.IsProduction) }}
{{ if hugo.IsProduction }}
  {{ $search = $search | fingerprint }}
{{ end }}
<script src="{{ $search.RelPermalink }}"></script>
{{ end }}
